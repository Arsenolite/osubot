# 白菜。
## 一个依赖于酷Q Websocket插件（Lemoc）的QQ机器人。使用java编写，面向osu群。


### 具有的特性：
------
+ 绘制指定玩家的名片（所有组件坐标、字体、字体尺寸、颜色，以及布局、模板都可以自定义）。
+ 绘制指定玩家的今日BP。
+ 每天凌晨4点（北京时间）将所有在机器人查询过的玩家数据，写入数据库，并提供命令，可以把对比数据打印在名片上。（如果请求的那天没有数据，会自动查找最接近的日子。）
+ 查询所有玩家数据中PP超限的玩家。支持设置警戒线（高过警戒线的才查询osu API获取当前PP）。
+ 支持用户组。可以根据用户组自定义名片背景。提供命令修改/重置用户组，还可以直接用命令指定某用户组的图片。


### 命令列表：
------
`!stat <username> #<day> `

查询指定玩家数据，并根据day参数进行对比，绘制图片并返回。

`day=0`：不对比。

`day=1`：相当于默认。和当天凌晨的数据进行对比。

`day=x`：与x天前（数据库中x-1天前的凌晨4点数据）的数据进行对比。


`!bp <username>`
简单的返回指定玩家今天更新的bp。

#### 以下命令只有配置文件中指定的管理员QQ发送才有效，并且都支持私聊。
------

`!sudo add <username1>,<username2>,... <role>`

将指定玩家加入数据库。如果传入的是单个玩家，则返回一张默认的stat名片。

`!sudo del <username1>,<username2>,...`

将指定玩家的权限恢复默认。预置的默认值是"creep"，来自Dota 2中的小兵。
以上两条命令会返回重置/修改成功的玩家，新增的玩家，不存在的玩家，以及出现网络错误的玩家。

`!sudo check <username>`

只接受单个玩家作为参数，返回玩家的权限。如果玩家没有使用过，也返回相应的提示。

`!sudo 退群 <role>`

作为作者恶趣味的产物，"褪裙"也会被识别。
返回指定用户组中，PP超过配置文件中指定的值的玩家。
配置文件的key值请使用：角色名+PP/角色名+RiskPP。
后者作为警戒线，只有高于警戒线的玩家才会在官网查询最新的信息，其他玩家是直接读取数据库当天凌晨4点的信息。推荐设置为比上限少100的值。

`!sudo bg <role> <image>`
将指定的图片设置为指定的用户组所用的背景图，图片直接以普通表情的形式发送即可。请务必注意图片的尺寸。
返回成功提示/相应的错误信息。

